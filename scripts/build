#!/usr/bin/env xonsh
import argparse

parser = argparse.ArgumentParser()
parser.add_argument("builder", default="html")
args, rest = parser.parse_known_args()

build_path = pf'.build-{args.builder}'
build_path.mkdir(parents=True, exist_ok=True)

link_path = p'_build'
if link_path.exists():
    if link_path.is_symlink():
        link_path.unlink()
    else:
        link_path.rmdir()
link_path.symlink_to(build_path, True)


jupyter book build . --builder=@(args.builder) -n @(rest)
